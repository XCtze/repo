getgenv().ESP = true
getgenv().SkipL = true -- may cause some errors with game

if getgenv().ESP == true then
    loadstring(game:HttpGet("https://raw.githubusercontent.com/XCtze/repo/refs/heads/main/esp", true))()
end

if getgenv().SkipL == true then
    if game.PlaceId == 3311165597 then  -- Check if the place is the correct one
        -- Wait for game to load
        repeat wait() until game:IsLoaded()
        repeat wait() until game.Players.LocalPlayer
        local lplr = game.Players.LocalPlayer
        repeat wait() until lplr.Character
        local ldata = game.ReplicatedStorage:WaitForChild("Datas"):WaitForChild(lplr.UserId)

        -- Load the character in
        if lplr.PlayerGui:FindFirstChild("Start") then
            game:GetService("ReplicatedStorage").Package.Events.Start:InvokeServer()
            
            -- Remove title if it exists
            local title = workspace.Others:FindFirstChild("Title")
            if title then title:Destroy() end
            
            -- Set up camera
            local cam = game.Workspace.CurrentCamera
            cam.CameraType = Enum.CameraType.Custom
            cam.CameraSubject = lplr.Character:FindFirstChildOfClass("Humanoid")
            
            -- Enable UI and finalize setup
            _G.Ready = true
            game.StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)
            local mainGui = lplr.PlayerGui:FindFirstChild("Main")
            if mainGui then
                mainGui.Enabled = true
                local bruh = mainGui:FindFirstChild("bruh")
                if bruh then
                    bruh.Enabled = false
                    bruh.Enabled = true
                end
            end

            -- Remove Start GUI if still present
            local startGui = lplr.PlayerGui:FindFirstChild("Start")
            if startGui then
                startGui:Destroy()
            end
        end
    else
        print("Invalid world, not skipping")  -- Added else statement
    end
end
